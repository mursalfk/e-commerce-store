{"version":3,"sources":["Context.js","withContext.js","components/AddProduct.js","components/CartItem.js","components/Cart.js","components/Login.js","components/ProductItem.js","components/ProductList.js","App.js","serviceWorker.js","index.js"],"names":["Context","React","createContext","withContext","WrappedComponent","props","Consumer","context","initState","name","price","stock","shortDesc","description","save","e","a","preventDefault","state","id","Math","random","toString","substring","Date","now","axios","post","addProduct","setState","flash","status","msg","handleChange","target","value","this","user","accessLevel","className","onSubmit","type","onChange","required","rows","style","resize","onClick","to","Component","CartItem","cartItem","cartKey","product","amount","src","alt","textTransform","removeFromCart","cart","cartKeys","Object","keys","length","map","key","clearCart","checkout","login","username","password","error","then","loggedIn","ProductItem","addToCart","products","index","App","email","catch","res","message","jwt_decode","data","accessToken","token","localStorage","setItem","JSON","stringify","logout","removeItem","callback","slice","push","cartItemId","p","put","routerRef","current","history","createRef","getItem","get","console","log","parse","Provider","ref","role","aria-label","class","aria-expanded","data-target","showMenu","aria-hidden","marginLeft","exact","path","component","Login","Cart","AddProduct","ProductList","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"+VAEeA,EADCC,IAAMC,cAAc,ICcrBC,EAZK,SAAAC,GASlB,OARgB,SAAAC,GACd,OACE,kBAAC,EAAQC,SAAT,MACG,SAAAC,GAAO,OAAI,kBAACH,EAAD,iBAAsBC,EAAtB,CAA6BE,QAASA,UCFpDC,EAAY,CAChBC,KAAM,GACNC,MAAO,GACPC,MAAO,GACPC,UAAW,GACXC,YAAa,IA0IAV,I,kDAtIb,WAAYE,GAAQ,IAAD,8BACjB,cAAMA,IAIRS,KALmB,uCAKZ,WAAOC,GAAP,2BAAAC,EAAA,yDACLD,EAAEE,iBADG,EAEkD,EAAKC,MAApDT,EAFH,EAEGA,KAAMC,EAFT,EAESA,MAAOC,EAFhB,EAEgBA,MAAOC,EAFvB,EAEuBA,UAAWC,EAFlC,EAEkCA,aAEnCJ,IAAQC,EAJP,wBAKGS,EAAKC,KAAKC,SAASC,SAAS,IAAIC,UAAU,GAAKC,KAAKC,MAAMH,SAAS,IALtE,SAOGI,IAAMC,KACV,gFACA,CAAER,KAAIV,OAAMC,QAAOC,QAAOC,YAAWC,gBATpC,OAYH,EAAKR,MAAME,QAAQqB,WACjB,CACEnB,OACAC,QACAE,YACAC,cACAF,MAAOA,GAAS,IAElB,kBAAM,EAAKkB,SAASrB,MAEtB,EAAKqB,SACH,CAAEC,MAAO,CAAEC,OAAQ,aAAcC,IAAK,kCAvBrC,wBA2BH,EAAKH,SACH,CAAEC,MAAO,CAAEC,OAAQ,YAAaC,IAAK,iCA5BpC,4CALY,wDAsCnBC,aAAe,SAAAlB,GAAC,aAAI,EAAKc,UAAL,mBAAiBd,EAAEmB,OAAOzB,KAAOM,EAAEmB,OAAOC,OAA1C,sBAAwD,IAAxD,KApClB,EAAKjB,MAAQV,EAFI,E,qDAwCT,IAAD,EACgD4B,KAAKlB,MAApDT,EADD,EACCA,KAAMC,EADP,EACOA,MAAOC,EADd,EACcA,MAAOC,EADrB,EACqBA,UAAWC,EADhC,EACgCA,YAC/BwB,EAASD,KAAK/B,MAAME,QAApB8B,KAER,OAASA,GAAQA,EAAKC,YAAc,EAGlC,oCACE,yBAAKC,UAAU,oBACb,yBAAKA,UAAU,uBACb,wBAAIA,UAAU,SAAd,iBAGJ,6BACA,6BACA,0BAAMC,SAAUJ,KAAKtB,MACnB,yBAAKyB,UAAU,iCACb,yBAAKA,UAAU,uBACb,yBAAKA,UAAU,SACb,2BAAOA,UAAU,SAAjB,kBACA,2BACEA,UAAU,QACVE,KAAK,OACLhC,KAAK,OACL0B,MAAO1B,EACPiC,SAAUN,KAAKH,aACfU,UAAQ,KAGZ,yBAAKJ,UAAU,SACb,2BAAOA,UAAU,SAAjB,WACA,2BACEA,UAAU,QACVE,KAAK,SACLhC,KAAK,QACL0B,MAAOzB,EACPgC,SAAUN,KAAKH,aACfU,UAAQ,KAGZ,yBAAKJ,UAAU,SACb,2BAAOA,UAAU,SAAjB,wBACA,2BACEA,UAAU,QACVE,KAAK,SACLhC,KAAK,QACL0B,MAAOxB,EACP+B,SAAUN,KAAKH,gBAGnB,yBAAKM,UAAU,SACb,2BAAOA,UAAU,SAAjB,uBACA,2BACEA,UAAU,QACVE,KAAK,OACLhC,KAAK,YACL0B,MAAOvB,EACP8B,SAAUN,KAAKH,gBAGnB,yBAAKM,UAAU,SACb,2BAAOA,UAAU,SAAjB,iBACA,8BACEA,UAAU,WACVE,KAAK,OACLG,KAAK,IACLC,MAAO,CAAEC,OAAQ,QACjBrC,KAAK,cACL0B,MAAOtB,EACP6B,SAAUN,KAAKH,gBAGlBG,KAAKlB,MAAMY,OACV,yBAAKS,UAAS,uBAAkBH,KAAKlB,MAAMY,MAAMC,SAC9CK,KAAKlB,MAAMY,MAAME,KAGtB,yBAAKO,UAAU,qBACb,4BACEA,UAAU,gDACVE,KAAK,SACLM,QAASX,KAAKtB,MAHhB,eAzEV,kBAAC,IAAD,CAAUkC,GAAG,U,GA9CMC,cCyBVC,EApCE,SAAA7C,GAAU,IACjB8C,EAAsB9C,EAAtB8C,SAAUC,EAAY/C,EAAZ+C,QAEVC,EAAoBF,EAApBE,QAASC,EAAWH,EAAXG,OACjB,OACE,yBAAKf,UAAU,mBACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,SACb,yBAAKA,UAAU,cACb,4BAAQA,UAAU,kBAChB,yBACEgB,IAAI,mDACJC,IAAKH,EAAQzC,cAInB,yBAAK2B,UAAU,iBACb,uBAAGM,MAAO,CAAEY,cAAe,eACxBJ,EAAQ5C,KAAM,IACf,0BAAM8B,UAAU,kBAAhB,IAAmCc,EAAQ3C,QAE7C,6BAAM2C,EAAQzC,WACd,yCAAW0C,EAAX,cAEF,yBACEf,UAAU,cACVQ,QAAS,kBAAM1C,EAAMqD,eAAeN,KAEpC,0BAAMb,UAAU,yBCwBbpC,KAlDF,SAAAE,GAAU,IACbsD,EAAStD,EAAME,QAAfoD,KACFC,EAAWC,OAAOC,KAAKH,GAAQ,IACrC,OACE,oCACE,yBAAKpB,UAAU,mBACb,yBAAKA,UAAU,uBACb,wBAAIA,UAAU,SAAd,aAGJ,6BACA,yBAAKA,UAAU,aACZqB,EAASG,OACR,yBAAKxB,UAAU,+BACZqB,EAASI,KAAI,SAAAC,GAAG,OACf,kBAAC,EAAD,CACEb,QAASa,EACTA,IAAKA,EACLd,SAAUQ,EAAKM,GACfP,eAAgBrD,EAAME,QAAQmD,oBAGlC,yBAAKnB,UAAU,4BACb,6BACA,yBAAKA,UAAU,mBACb,4BACEQ,QAAS1C,EAAME,QAAQ2D,UACvB3B,UAAU,sBAFZ,cAKU,IACV,4BACEA,UAAU,oBACVQ,QAAS1C,EAAME,QAAQ4D,UAFzB,eAUN,yBAAK5B,UAAU,UACb,yBAAKA,UAAU,6BAAf,0BCmCGpC,I,kDA5Eb,WAAYE,GAAQ,IAAD,8BACjB,cAAMA,IAOR4B,aAAe,SAAAlB,GAAC,aAAI,EAAKc,UAAL,mBAAiBd,EAAEmB,OAAOzB,KAAOM,EAAEmB,OAAOC,OAA1C,sBAAwD,IAAxD,KARD,EAUnBiC,MAAQ,SAACrD,GACPA,EAAEE,iBADW,MAGkB,EAAKC,MAA5BmD,EAHK,EAGLA,SAAUC,EAHL,EAGKA,SAClB,IAAKD,IAAaC,EAChB,OAAO,EAAKzC,SAAS,CAAE0C,MAAO,qBAEhC,EAAKlE,MAAME,QAAQ6D,MAAMC,EAAUC,GAChCE,MAAK,SAACC,GACAA,GACH,EAAK5C,SAAS,CAAE0C,MAAO,4BAlB7B,EAAKrD,MAAQ,CACXmD,SAAU,GACVC,SAAU,IAJK,E,qDA0BjB,OAAQlC,KAAK/B,MAAME,QAAQ8B,KA6CzB,kBAAC,IAAD,CAAUW,GAAG,cA5Cb,oCACE,yBAAKT,UAAU,oBACb,yBAAKA,UAAU,uBACb,wBAAIA,UAAU,SAAd,WAGJ,6BACA,6BACA,0BAAMC,SAAUJ,KAAKgC,OACnB,yBAAK7B,UAAU,iCACb,yBAAKA,UAAU,uBACb,yBAAKA,UAAU,SACb,2BAAOA,UAAU,SAAjB,WACA,2BACEA,UAAU,QACVE,KAAK,QACLhC,KAAK,WACLiC,SAAUN,KAAKH,gBAGnB,yBAAKM,UAAU,SACb,2BAAOA,UAAU,SAAjB,cACA,2BACEA,UAAU,QACVE,KAAK,WACLhC,KAAK,WACLiC,SAAUN,KAAKH,gBAGlBG,KAAKlB,MAAMqD,OACV,yBAAKhC,UAAU,mBAAmBH,KAAKlB,MAAMqD,OAE/C,yBAAKhC,UAAU,qBACb,4BACEA,UAAU,iDADZ,mB,GA7DIU,cC4CLyB,EA9CK,SAAArE,GAAU,IACpBgD,EAAYhD,EAAZgD,QACR,OACE,yBAAKd,UAAU,mBACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,SACb,yBAAKA,UAAU,cACb,4BAAQA,UAAU,kBAChB,yBACEgB,IAAI,mDACJC,IAAKH,EAAQzC,cAInB,yBAAK2B,UAAU,iBACb,uBAAGM,MAAO,CAAEY,cAAe,eACxBJ,EAAQ5C,KAAM,IACf,0BAAM8B,UAAU,kBAAhB,IAAmCc,EAAQ3C,QAE7C,6BAAM2C,EAAQzC,WACbyC,EAAQ1C,MAAQ,EACf,+BAAQ0C,EAAQ1C,MAAQ,cAExB,2BAAO4B,UAAU,mBAAjB,gBAEF,yBAAKA,UAAU,eACb,4BACEA,UAAU,2DACVQ,QAAS,kBACP1C,EAAMsE,UAAU,CACdxD,GAAIkC,EAAQ5C,KACZ4C,UACAC,OAAQ,MANd,qBCUCnD,KAlCK,SAAAE,GAAU,IACpBuE,EAAavE,EAAME,QAAnBqE,SAER,OACE,oCACE,yBAAKrC,UAAU,mBACb,yBAAKA,UAAU,uBACb,wBAAIA,UAAU,SAAd,kBAGJ,6BACA,yBAAKA,UAAU,aACb,yBAAKA,UAAU,+BACZqC,GAAYA,EAASb,OACpBa,EAASZ,KAAI,SAACX,EAASwB,GAAV,OACX,kBAAC,EAAD,CACExB,QAASA,EACTY,IAAKY,EACLF,UAAWtE,EAAME,QAAQoE,eAI7B,yBAAKpC,UAAU,UACb,0BAAMA,UAAU,6BAAhB,6BCdOuC,G,wDACnB,WAAYzE,GAAQ,IAAD,8BACjB,cAAMA,IAqBR+D,MAtBmB,uCAsBX,WAAOW,EAAOT,GAAd,qBAAAtD,EAAA,sEACYU,IAAMC,KACtB,8BACA,CAAEoD,QAAOT,aACTU,OAAM,SAACC,GACP,MAAO,CAAElD,OAAQ,IAAKmD,QAAS,mBAL3B,UAQa,OAPbD,EADA,QAQElD,OARF,0BAScoD,YAAWF,EAAIG,KAAKC,aAA9BN,EATJ,EASIA,MACF1C,EAAO,CACX0C,QACAO,MAAOL,EAAIG,KAAKC,YAChB/C,YAAuB,sBAAVyC,EAAgC,EAAI,GAGnD,EAAKlD,SAAS,CAAEQ,SAChBkD,aAAaC,QAAQ,OAAQC,KAAKC,UAAUrD,IAjBxC,mBAkBG,GAlBH,kCAoBG,GApBH,4CAtBW,0DA8CnBsD,OAAS,SAAA5E,GACPA,EAAEE,iBACF,EAAKY,SAAS,CAAEQ,KAAM,OACtBkD,aAAaK,WAAW,SAjDP,EAoDnBhE,WAAa,SAACyB,EAASwC,GACrB,IAAIjB,EAAW,EAAK1D,MAAM0D,SAASkB,QACnClB,EAASmB,KAAK1C,GACd,EAAKxB,SAAS,CAAE+C,aAAY,kBAAMiB,GAAYA,QAvD7B,EA0DnBlB,UAAY,SAAAxB,GACV,IAAIQ,EAAO,EAAKzC,MAAMyC,KAClBA,EAAKR,EAAShC,IAChBwC,EAAKR,EAAShC,IAAImC,QAAUH,EAASG,OAErCK,EAAKR,EAAShC,IAAMgC,EAElBQ,EAAKR,EAAShC,IAAImC,OAASK,EAAKR,EAAShC,IAAIkC,QAAQ1C,QACvDgD,EAAKR,EAAShC,IAAImC,OAASK,EAAKR,EAAShC,IAAIkC,QAAQ1C,OAEvD4E,aAAaC,QAAQ,OAAQC,KAAKC,UAAU/B,IAC5C,EAAK9B,SAAS,CAAE8B,UArEC,EAwEnBD,eAAiB,SAAAsC,GACf,IAAIrC,EAAO,EAAKzC,MAAMyC,YACfA,EAAKqC,GACZT,aAAaC,QAAQ,OAAQC,KAAKC,UAAU/B,IAC5C,EAAK9B,SAAS,CAAE8B,UA5EC,EA+EnBO,UAAY,WAEVqB,aAAaK,WAAW,QACxB,EAAK/D,SAAS,CAAE8B,KAFL,MAhFM,EAqFnBQ,SAAW,WACT,GAAK,EAAKjD,MAAMmB,KAAhB,CAKA,IAAMsB,EAAO,EAAKzC,MAAMyC,KAElBiB,EAAW,EAAK1D,MAAM0D,SAASZ,KAAI,SAAAiC,GASvC,OARItC,EAAKsC,EAAExF,QACTwF,EAAEtF,MAAQsF,EAAEtF,MAAQgD,EAAKsC,EAAExF,MAAM6C,OAEjC5B,IAAMwE,IAAN,yCACoCD,EAAE9E,IADtC,eAEO8E,KAGFA,KAGT,EAAKpE,SAAS,CAAE+C,aAChB,EAAKV,iBAnBH,EAAKiC,UAAUC,QAAQC,QAAQN,KAAK,WArFtC,EAAK7E,MAAQ,CACXmB,KAAM,KACNsB,KAAM,GACNiB,SAAU,IAEZ,EAAKuB,UAAYlG,IAAMqG,YAPN,E,2LAWbjE,EAAOkD,aAAagB,QAAQ,QAC5B5C,EAAO4B,aAAagB,QAAQ,Q,SAET7E,IAAM8E,IAAI,qG,OAA3B5B,E,OACN6B,QAAQC,IAAI,CAAC9B,aACbvC,EAAOA,EAAOoD,KAAKkB,MAAMtE,GAAQ,KACjCsB,EAAOA,EAAO8B,KAAKkB,MAAMhD,GAAQ,GAEjCvB,KAAKP,SAAS,CAAEQ,OAAMuC,SAAUA,EAASQ,KAAMzB,S,qIA0FvC,IAAD,OACP,OACE,kBAAC,EAAQiD,SAAT,CACEzE,MAAK,2BACAC,KAAKlB,OADL,IAEHwC,eAAgBtB,KAAKsB,eACrBiB,UAAWvC,KAAKuC,UAChBP,MAAOhC,KAAKgC,MACZxC,WAAYQ,KAAKR,WACjBsC,UAAW9B,KAAK8B,UAChBC,SAAU/B,KAAK+B,YAGjB,kBAAC,IAAD,CAAQ0C,IAAKzE,KAAK+D,WAChB,yBAAK5D,UAAU,OACb,yBACEA,UAAU,mBACVuE,KAAK,aACLC,aAAW,mBAEX,yBAAKxE,UAAU,gBACb,kBAAC,IAAD,CAAMS,GAAG,IAAIT,UAAU,eACrB,uBAAGA,UAAU,0BAAb,cAEF,2BACEuE,KAAK,SACLE,MAAM,uBACND,aAAW,OACXE,gBAAc,QACdC,cAAY,qBACZnE,QAAS,SAAAhC,GACPA,EAAEE,iBACF,EAAKY,SAAS,CAAEsF,UAAW,EAAKjG,MAAMiG,aAGxC,0BAAMC,cAAY,SAClB,0BAAMA,cAAY,SAClB,0BAAMA,cAAY,WAGtB,yBAAK7E,UAAS,sBAAiBH,KAAKlB,MAAMiG,SAAW,YAAc,KAEjE,kBAAC,IAAD,CAAMnE,GAAG,YAAYT,UAAU,eAA/B,YAGCH,KAAKlB,MAAMmB,MAAQD,KAAKlB,MAAMmB,KAAKC,YAAc,GAChD,kBAAC,IAAD,CAAMU,GAAG,eAAeT,UAAU,eAAlC,eAIF,kBAAC,IAAD,CAAMS,GAAG,QAAQT,UAAU,eAA3B,OAEE,0BACEA,UAAU,iBACVM,MAAO,CAAEwE,WAAY,QAEpBxD,OAAOC,KAAK1B,KAAKlB,MAAMyC,MAAMI,SAGhC3B,KAAKlB,MAAMmB,KAKX,kBAAC,IAAD,CAAMW,GAAG,IAAID,QAASX,KAAKuD,OAAQpD,UAAU,eAA7C,UAJA,kBAAC,IAAD,CAAMS,GAAG,SAAST,UAAU,eAA5B,WAUN,kBAAC,IAAD,KAGE,kBAAC,IAAD,CAAO+E,OAAK,EAACC,KAAK,SAASC,UAAWC,IACtC,kBAAC,IAAD,CAAOH,OAAK,EAACC,KAAK,QAAQC,UAAWE,IACrC,kBAAC,IAAD,CAAOJ,OAAK,EAACC,KAAK,eAAeC,UAAWG,IAC5C,kBAAC,IAAD,CAAOL,OAAK,EAACC,KAAK,YAAYC,UAAWI,OAK/C,6BAASrF,UAAU,6BACjB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,aACb,wBAAIA,UAAU,SAAd,8BAGA,0BAAMA,UAAU,YAAhB,wBAEE,2BAAOA,UAAU,uDACf,+BACE,4BACE,0CACA,4CACA,+CAGJ,+BACE,4BACE,uCACA,qDACA,iEAEF,4BACE,uCACA,6CACA,mEAEF,4BACE,uCACA,uDACA,uEAIN,0BAAMA,UAAU,YAAhB,oD,GAjOiBU,cCDb4E,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2D,MCXNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,SDwHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBjE,MAAK,SAAAkE,GACJA,EAAaC,gBAEd3D,OAAM,SAAAT,GACLkC,QAAQlC,MAAMA,EAAMW,c","file":"static/js/main.29c1d300.chunk.js","sourcesContent":["import React from \"react\";\r\nconst Context = React.createContext({});\r\nexport default Context;\r\n","import React from \"react\";\r\nimport Context from \"./Context\";\r\n\r\nconst withContext = WrappedComponent => {\r\n  const WithHOC = props => {\r\n    return (\r\n      <Context.Consumer>\r\n        {context => <WrappedComponent {...props} context={context} />}\r\n      </Context.Consumer>\r\n    );\r\n  };\r\n\r\n  return WithHOC;\r\n};\r\n\r\nexport default withContext;\r\n","import React, { Component } from \"react\";\r\nimport withContext from \"../withContext\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport axios from 'axios';\r\n\r\nconst initState = {\r\n  name: \"\",\r\n  price: \"\",\r\n  stock: \"\",\r\n  shortDesc: \"\",\r\n  description: \"\"\r\n};\r\n\r\nclass AddProduct extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = initState;\r\n  }\r\n\r\n  save = async (e) => {\r\n    e.preventDefault();\r\n    const { name, price, stock, shortDesc, description } = this.state;\r\n\r\n    if (name && price) {\r\n      const id = Math.random().toString(36).substring(2) + Date.now().toString(36);\r\n\r\n      await axios.post(\r\n        'https://xw7qzi3dgg.execute-api.ap-south-1.amazonaws.com/dev/api/v1/addProduct',\r\n        { id, name, price, stock, shortDesc, description },\r\n      )\r\n\r\n      this.props.context.addProduct(\r\n        {\r\n          name,\r\n          price,\r\n          shortDesc,\r\n          description,\r\n          stock: stock || 0\r\n        },\r\n        () => this.setState(initState)\r\n      );\r\n      this.setState(\r\n        { flash: { status: 'is-success', msg: 'Product created successfully' }}\r\n      );\r\n\r\n    } else {\r\n      this.setState(\r\n        { flash: { status: 'is-danger', msg: 'Please enter name and price' }}\r\n      );\r\n    }\r\n  };\r\n\r\n  handleChange = e => this.setState({ [e.target.name]: e.target.value, error: \"\" });\r\n\r\n  render() {\r\n    const { name, price, stock, shortDesc, description } = this.state;\r\n    const { user } = this.props.context;\r\n\r\n    return !(user && user.accessLevel < 1) ? (\r\n      <Redirect to=\"/\" />\r\n    ) : (\r\n      <>\r\n        <div className=\"hero is-primary \">\r\n          <div className=\"hero-body container\">\r\n            <h4 className=\"title\">Add Product</h4>\r\n          </div>\r\n        </div>\r\n        <br />\r\n        <br />\r\n        <form onSubmit={this.save}>\r\n          <div className=\"columns is-mobile is-centered\">\r\n            <div className=\"column is-one-third\">\r\n              <div className=\"field\">\r\n                <label className=\"label\">Product Name: </label>\r\n                <input\r\n                  className=\"input\"\r\n                  type=\"text\"\r\n                  name=\"name\"\r\n                  value={name}\r\n                  onChange={this.handleChange}\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"field\">\r\n                <label className=\"label\">Price: </label>\r\n                <input\r\n                  className=\"input\"\r\n                  type=\"number\"\r\n                  name=\"price\"\r\n                  value={price}\r\n                  onChange={this.handleChange}\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"field\">\r\n                <label className=\"label\">Available in Stock: </label>\r\n                <input\r\n                  className=\"input\"\r\n                  type=\"number\"\r\n                  name=\"stock\"\r\n                  value={stock}\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n              <div className=\"field\">\r\n                <label className=\"label\">Short Description: </label>\r\n                <input\r\n                  className=\"input\"\r\n                  type=\"text\"\r\n                  name=\"shortDesc\"\r\n                  value={shortDesc}\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n              <div className=\"field\">\r\n                <label className=\"label\">Description: </label>\r\n                <textarea\r\n                  className=\"textarea\"\r\n                  type=\"text\"\r\n                  rows=\"2\"\r\n                  style={{ resize: \"none\" }}\r\n                  name=\"description\"\r\n                  value={description}\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n              {this.state.flash && (\r\n                <div className={`notification ${this.state.flash.status}`}>\r\n                  {this.state.flash.msg}\r\n                </div>\r\n              )}\r\n              <div className=\"field is-clearfix\">\r\n                <button\r\n                  className=\"button is-primary is-outlined is-pulled-right\"\r\n                  type=\"submit\"\r\n                  onClick={this.save}\r\n                >\r\n                  Submit\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withContext(AddProduct);\r\n","import React from \"react\";\r\n\r\nconst CartItem = props => {\r\n  const { cartItem, cartKey } = props;\r\n\r\n  const { product, amount } = cartItem;\r\n  return (\r\n    <div className=\" column is-half\">\r\n      <div className=\"box\">\r\n        <div className=\"media\">\r\n          <div className=\"media-left\">\r\n            <figure className=\"image is-64x64\">\r\n              <img\r\n                src=\"https://bulma.io/images/placeholders/128x128.png\"\r\n                alt={product.shortDesc}\r\n              />\r\n            </figure>\r\n          </div>\r\n          <div className=\"media-content\">\r\n            <b style={{ textTransform: \"capitalize\" }}>\r\n              {product.name}{\" \"}\r\n              <span className=\"tag is-primary\">${product.price}</span>\r\n            </b>\r\n            <div>{product.shortDesc}</div>\r\n            <small>{`${amount} in cart`}</small>\r\n          </div>\r\n          <div\r\n            className=\"media-right\"\r\n            onClick={() => props.removeFromCart(cartKey)}\r\n          >\r\n            <span className=\"delete is-large\"></span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartItem;\r\n","import React from \"react\";\r\nimport withContext from \"../withContext\";\r\nimport CartItem from \"./CartItem\";\r\n\r\nconst Cart = props => {\r\n  const { cart } = props.context;\r\n  const cartKeys = Object.keys(cart || {});\r\n  return (\r\n    <>\r\n      <div className=\"hero is-primary\">\r\n        <div className=\"hero-body container\">\r\n          <h4 className=\"title\">My Cart</h4>\r\n        </div>\r\n      </div>\r\n      <br />\r\n      <div className=\"container\">\r\n        {cartKeys.length ? (\r\n          <div className=\"column columns is-multiline\">\r\n            {cartKeys.map(key => (\r\n              <CartItem\r\n                cartKey={key}\r\n                key={key}\r\n                cartItem={cart[key]}\r\n                removeFromCart={props.context.removeFromCart}\r\n              />\r\n            ))}\r\n            <div className=\"column is-12 is-clearfix\">\r\n              <br />\r\n              <div className=\"is-pulled-right\">\r\n                <button\r\n                  onClick={props.context.clearCart}\r\n                  className=\"button is-warning \"\r\n                >\r\n                  Clear cart\r\n                </button>{\" \"}\r\n                <button\r\n                  className=\"button is-success\"\r\n                  onClick={props.context.checkout}\r\n                >\r\n                  Checkout\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"column\">\r\n            <div className=\"title has-text-grey-light\">No item in cart!</div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withContext(Cart);\r\n","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport withContext from \"../withContext\";\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      password: \"\"\r\n    };\r\n  }\r\n\r\n  handleChange = e => this.setState({ [e.target.name]: e.target.value, error: \"\" });\r\n\r\n  login = (e) => {\r\n    e.preventDefault();\r\n\r\n    const { username, password } = this.state;\r\n    if (!username || !password) {\r\n      return this.setState({ error: \"Fill all fields!\" });\r\n    }\r\n    this.props.context.login(username, password)\r\n      .then((loggedIn) => {\r\n        if (!loggedIn) {\r\n          this.setState({ error: \"Invalid Credentails\" });\r\n        }\r\n      })\r\n  };\r\n\r\n  render() {\r\n    return !this.props.context.user ? (\r\n      <>\r\n        <div className=\"hero is-primary \">\r\n          <div className=\"hero-body container\">\r\n            <h4 className=\"title\">Login</h4>\r\n          </div>\r\n        </div>\r\n        <br />\r\n        <br />\r\n        <form onSubmit={this.login}>\r\n          <div className=\"columns is-mobile is-centered\">\r\n            <div className=\"column is-one-third\">\r\n              <div className=\"field\">\r\n                <label className=\"label\">Email: </label>\r\n                <input\r\n                  className=\"input\"\r\n                  type=\"email\"\r\n                  name=\"username\"\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n              <div className=\"field\">\r\n                <label className=\"label\">Password: </label>\r\n                <input\r\n                  className=\"input\"\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n              {this.state.error && (\r\n                <div className=\"has-text-danger\">{this.state.error}</div>\r\n              )}\r\n              <div className=\"field is-clearfix\">\r\n                <button\r\n                  className=\"button is-primary is-outlined is-pulled-right\"\r\n                >\r\n                  Submit\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </>\r\n    ) : (\r\n      <Redirect to=\"/products\" />\r\n    );\r\n  }\r\n}\r\n\r\nexport default withContext(Login);\r\n","import React from \"react\";\r\n\r\nconst ProductItem = props => {\r\n  const { product } = props;\r\n  return (\r\n    <div className=\" column is-half\">\r\n      <div className=\"box\">\r\n        <div className=\"media\">\r\n          <div className=\"media-left\">\r\n            <figure className=\"image is-64x64\">\r\n              <img\r\n                src=\"https://bulma.io/images/placeholders/128x128.png\"\r\n                alt={product.shortDesc}\r\n              />\r\n            </figure>\r\n          </div>\r\n          <div className=\"media-content\">\r\n            <b style={{ textTransform: \"capitalize\" }}>\r\n              {product.name}{\" \"}\r\n              <span className=\"tag is-primary\">${product.price}</span>\r\n            </b>\r\n            <div>{product.shortDesc}</div>\r\n            {product.stock > 0 ? (\r\n              <small>{product.stock + \" Available\"}</small>\r\n            ) : (\r\n              <small className=\"has-text-danger\">Out Of Stock</small>\r\n            )}\r\n            <div className=\"is-clearfix\">\r\n              <button\r\n                className=\"button is-small is-outlined is-primary   is-pulled-right\"\r\n                onClick={() =>\r\n                  props.addToCart({\r\n                    id: product.name,\r\n                    product,\r\n                    amount: 1\r\n                  })\r\n                }\r\n              >\r\n                Add to Cart\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductItem;\r\n","import React from \"react\";\r\nimport ProductItem from \"./ProductItem\";\r\nimport withContext from \"../withContext\";\r\n\r\nconst ProductList = props => {\r\n  const { products } = props.context;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"hero is-primary\">\r\n        <div className=\"hero-body container\">\r\n          <h4 className=\"title\">Our Products</h4>\r\n        </div>\r\n      </div>\r\n      <br />\r\n      <div className=\"container\">\r\n        <div className=\"column columns is-multiline\">\r\n          {products && products.length ? (\r\n            products.map((product, index) => (\r\n              <ProductItem\r\n                product={product}\r\n                key={index}\r\n                addToCart={props.context.addToCart}\r\n              />\r\n            ))\r\n          ) : (\r\n            <div className=\"column\">\r\n              <span className=\"title has-text-grey-light\">\r\n                No products found!\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withContext(ProductList);\r\n","import React, { Component } from \"react\";\r\nimport { Switch, Route, Link, BrowserRouter as Router } from \"react-router-dom\";\r\nimport axios from 'axios';\r\nimport jwt_decode from 'jwt-decode';\r\n\r\nimport AddProduct from './components/AddProduct';\r\nimport Cart from './components/Cart';\r\nimport Login from './components/Login';\r\nimport ProductList from './components/ProductList';\r\nimport './App.css'\r\n\r\nimport Context from \"./Context\";\r\n\r\nexport default class App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: null,\r\n      cart: {},\r\n      products: []\r\n    };\r\n    this.routerRef = React.createRef();\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let user = localStorage.getItem(\"user\");\r\n    let cart = localStorage.getItem(\"cart\");\r\n\r\n    const products = await axios.get('https://xw7qzi3dgg.execute-api.ap-south-1.amazonaws.com/dev/api/v1/getAllProducts?page=1&limit=10');\r\n    console.log({products})\r\n    user = user ? JSON.parse(user) : null;\r\n    cart = cart ? JSON.parse(cart) : {};\r\n\r\n    this.setState({ user, products: products.data, cart });\r\n  }\r\n\r\n  login = async (email, password) => {\r\n    const res = await axios.post(\r\n      'http://localhost:3001/login',\r\n      { email, password },\r\n    ).catch((res) => {\r\n      return { status: 401, message: 'Unauthorized' }\r\n    })\r\n\r\n    if (res.status === 200) {\r\n      const { email } = jwt_decode(res.data.accessToken)\r\n      const user = {\r\n        email,\r\n        token: res.data.accessToken,\r\n        accessLevel: email === 'admin@example.com' ? 0 : 1\r\n      }\r\n\r\n      this.setState({ user });\r\n      localStorage.setItem(\"user\", JSON.stringify(user));\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  logout = e => {\r\n    e.preventDefault();\r\n    this.setState({ user: null });\r\n    localStorage.removeItem(\"user\");\r\n  };\r\n\r\n  addProduct = (product, callback) => {\r\n    let products = this.state.products.slice();\r\n    products.push(product);\r\n    this.setState({ products }, () => callback && callback());\r\n  };\r\n\r\n  addToCart = cartItem => {\r\n    let cart = this.state.cart;\r\n    if (cart[cartItem.id]) {\r\n      cart[cartItem.id].amount += cartItem.amount;\r\n    } else {\r\n      cart[cartItem.id] = cartItem;\r\n    }\r\n    if (cart[cartItem.id].amount > cart[cartItem.id].product.stock) {\r\n      cart[cartItem.id].amount = cart[cartItem.id].product.stock;\r\n    }\r\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n    this.setState({ cart });\r\n  };\r\n\r\n  removeFromCart = cartItemId => {\r\n    let cart = this.state.cart;\r\n    delete cart[cartItemId];\r\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n    this.setState({ cart });\r\n  };\r\n\r\n  clearCart = () => {\r\n    let cart = {};\r\n    localStorage.removeItem(\"cart\");\r\n    this.setState({ cart });\r\n  };\r\n\r\n  checkout = () => {\r\n    if (!this.state.user) {\r\n      this.routerRef.current.history.push(\"/login\");\r\n      return;\r\n    }\r\n\r\n    const cart = this.state.cart;\r\n\r\n    const products = this.state.products.map(p => {\r\n      if (cart[p.name]) {\r\n        p.stock = p.stock - cart[p.name].amount;\r\n\r\n        axios.put(\r\n          `http://localhost:3001/products/${p.id}`,\r\n          { ...p },\r\n        )\r\n      }\r\n      return p;\r\n    });\r\n\r\n    this.setState({ products });\r\n    this.clearCart();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Context.Provider\r\n        value={{\r\n          ...this.state,\r\n          removeFromCart: this.removeFromCart,\r\n          addToCart: this.addToCart,\r\n          login: this.login,\r\n          addProduct: this.addProduct,\r\n          clearCart: this.clearCart,\r\n          checkout: this.checkout\r\n        }}\r\n      >\r\n        <Router ref={this.routerRef}>\r\n          <div className=\"App\">\r\n            <nav\r\n              className=\"navbar container\"\r\n              role=\"navigation\"\r\n              aria-label=\"main navigation\"\r\n            >\r\n              <div className=\"navbar-brand\">\r\n                <Link to=\"/\" className=\"navbar-item\">\r\n                  <b className=\"navbar-item is-size-4 \">ecommerce</b>\r\n                </Link>\r\n                <label\r\n                  role=\"button\"\r\n                  class=\"navbar-burger burger\"\r\n                  aria-label=\"menu\"\r\n                  aria-expanded=\"false\"\r\n                  data-target=\"navbarBasicExample\"\r\n                  onClick={e => {\r\n                    e.preventDefault();\r\n                    this.setState({ showMenu: !this.state.showMenu });\r\n                  }}\r\n                >\r\n                  <span aria-hidden=\"true\"></span>\r\n                  <span aria-hidden=\"true\"></span>\r\n                  <span aria-hidden=\"true\"></span>\r\n                </label>\r\n              </div>\r\n              <div className={`navbar-menu ${this.state.showMenu ? \"is-active\" : \"\"\r\n                }`}>\r\n                <Link to=\"/products\" className=\"navbar-item\">\r\n                  Products\r\n                </Link>\r\n                {this.state.user && this.state.user.accessLevel < 1 && (\r\n                  <Link to=\"/add-product\" className=\"navbar-item\">\r\n                    Add Product\r\n                  </Link>\r\n                )}\r\n                <Link to=\"/cart\" className=\"navbar-item\">\r\n                  Cart\r\n                  <span\r\n                    className=\"tag is-primary\"\r\n                    style={{ marginLeft: \"5px\" }}\r\n                  >\r\n                    {Object.keys(this.state.cart).length}\r\n                  </span>\r\n                </Link>\r\n                {!this.state.user ? (\r\n                  <Link to=\"/login\" className=\"navbar-item\">\r\n                    Login\r\n                  </Link>\r\n                ) : (\r\n                  <Link to=\"/\" onClick={this.logout} className=\"navbar-item\">\r\n                    Logout\r\n                  </Link>\r\n                )}\r\n              </div>\r\n            </nav>\r\n            <Switch>\r\n              {/* Default path to homepage */}\r\n              {/* <Route exact path=\"/\" component={ProductList} /> */}\r\n              <Route exact path=\"/login\" component={Login} />\r\n              <Route exact path=\"/cart\" component={Cart} />\r\n              <Route exact path=\"/add-product\" component={AddProduct} />\r\n              <Route exact path=\"/products\" component={ProductList} />\r\n            </Switch>\r\n          </div>\r\n        </Router>\r\n        {/* Welcome Image */}\r\n        <section className=\"hero is-primary is-medium\">\r\n          <div className=\"hero-body\">\r\n            <div className=\"container\">\r\n              <h1 className=\"title\">\r\n                Welcome to Ecommerce Store\r\n              </h1>\r\n              <span className=\"subtitle\">\r\n                Project Submitted by:\r\n                <table className=\"table is-bordered is-striped is-narrow is-hoverable\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Student ID</th>\r\n                      <th>Student Name</th>\r\n                      <th>Student Email</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr>\r\n                      <td>2047419</td>\r\n                      <td>Mursal Furqan Kumbhar</td>\r\n                      <td>kumbhar.2047419@studenti.uniroma</td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>2053796</td>\r\n                      <td>Srinjan Ghosh</td>\r\n                      <td>ghosh.2053796@studenti.uniroma1.it</td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>2049050</td>\r\n                      <td>Muhammad Waseem Kalhoro</td>\r\n                      <td>kalhoro.2049050@studenti.uniroma1.it</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n                <span className=\"profName\">\r\n                  Submited to: Prof. Emiliano Casalicchio\r\n                </span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </Context.Provider>\r\n    );\r\n  }\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport \"bulma/css/bulma.css\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}