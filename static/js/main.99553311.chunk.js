(this["webpackJsonpe-commerce-store"]=this["webpackJsonpe-commerce-store"]||[]).push([[0],{36:function(e){e.exports=JSON.parse('{"users":[{"email":"regular@example.com","password":"password","id":1},{"email":"admin@example.com","password":"password","id":2}]}')},38:function(e,t,a){e.exports=a.p+"static/media/image1.77135d14.jpg"},40:function(e,t,a){e.exports=a(72)},45:function(e,t,a){},70:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(35),l=a.n(c),s=(a(45),a(39)),o=a(6),i=a(1),m=a.n(i),u=a(8),d=a(4),p=a(3),E=a(2),h=a(9),v=a.n(h),b=(a(64),a(36)),f=a(13),g=a(18),N=a(19),x=a(21),k=a(20),O=r.a.createContext({}),y=function(e){return function(t){return r.a.createElement(O.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{context:a}))}))}},C={name:"",price:"",stock:"",shortDesc:"",description:""},w=y(function(e){Object(x.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this,e)).save=function(){var e=Object(u.a)(m.a.mark((function e(t){var a,r,c,l,s,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=n.state,r=a.name,c=a.price,l=a.stock,s=a.shortDesc,o=a.description,!r||!c){e.next=10;break}return i=Math.random().toString(36).substring(2)+Date.now().toString(36),e.next=6,v.a.post("https://xw7qzi3dgg.execute-api.ap-south-1.amazonaws.com/dev/api/v1/addProduct",{id:i,name:r,price:c,stock:l,shortDesc:s,description:o});case 6:n.props.context.addProduct({name:r,price:c,shortDesc:s,description:o,stock:l||0},(function(){return n.setState(C)})),n.setState({flash:{status:"is-success",msg:"Product created successfully"}}),e.next=11;break;case 10:n.setState({flash:{status:"is-danger",msg:"Please enter name and price"}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){var t;return n.setState((t={},Object(f.a)(t,e.target.name,e.target.value),Object(f.a)(t,"error",""),t))},n.state=C,n}return Object(N.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.price,n=e.stock,c=e.shortDesc,l=e.description,s=this.props.context.user;return s&&s.accessLevel<1?r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title has-text-centered"},"Add Product"),r.a.createElement("form",{onSubmit:this.save},r.a.createElement("div",{className:"columns is-centered"},r.a.createElement("div",{className:"column is-one-third"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Product Name:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"name",value:t,onChange:this.handleChange,required:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Price:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"number",name:"price",value:a,onChange:this.handleChange,required:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Available in Stock:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"number",name:"stock",value:n,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Short Description:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",name:"shortDesc",value:c,onChange:this.handleChange}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Description:"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",rows:"2",style:{resize:"none"},name:"description",value:l,onChange:this.handleChange}))),this.state.flash&&r.a.createElement("div",{className:"notification ".concat(this.state.flash.status)},this.state.flash.msg),r.a.createElement("div",{className:"field is-clearfix"},r.a.createElement("button",{className:"button is-primary is-outlined is-pulled-right",type:"submit",onClick:this.save},"Submit"))))))):r.a.createElement(E.a,{to:"/"})}}]),a}(n.Component)),j=function(e){var t=e.cartItem,a=e.cartKey,c=t.product,l=t.amount,s=Object(n.useState)(!1),o=Object(d.a)(s,2),i=o[0],m=o[1];return r.a.createElement("div",{className:"column is-half"},r.a.createElement("div",{className:"box"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("b",{style:{textTransform:"capitalize"}},c.name," ",r.a.createElement("span",{className:"tag is-primary"},"$",c.price)),r.a.createElement("div",null,c.shortDesc),r.a.createElement("small",null,"".concat(l," in cart"))),r.a.createElement("div",{className:"media-right",onClick:function(){m(!0),setTimeout((function(){m(!1),e.removeFromCart(a)}),3e3)}},r.a.createElement("span",{className:"delete is-large"})))),i&&r.a.createElement("div",{className:"notification is-success"},"Item removed from the cart!"))},S=y((function(e){var t=e.context.cart,a=Object.keys(t||{}),c=Object(n.useState)(!1),l=Object(d.a)(c,2),s=l[0],o=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"hero is-primary"},r.a.createElement("div",{className:"hero-body container"},r.a.createElement("h4",{className:"title"},"My Cart"))),r.a.createElement("br",null),r.a.createElement("div",{className:"container"},a.length?r.a.createElement("div",{className:"column columns is-multiline"},a.map((function(a){return r.a.createElement(j,{cartKey:a,key:a,cartItem:t[a],removeFromCart:e.context.removeFromCart})})),r.a.createElement("div",{className:"column is-12 is-clearfix"},r.a.createElement("br",null),r.a.createElement("div",{className:"is-pulled-right"},r.a.createElement("button",{onClick:function(){o(!0),setTimeout((function(){o(!1),e.context.clearCart()}),3e3)},className:"button is-warning"},"Clear cart")," ",r.a.createElement("button",{className:"button is-success",onClick:e.context.checkout},"Checkout")))):r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"title has-text-grey-light"},"No item in cart!"))),s&&r.a.createElement("div",{className:"notification is-success cart-notification"},"Cart cleared successfully!"))})),P=y(function(e){Object(x.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t;return n.setState((t={},Object(f.a)(t,e.target.name,e.target.value),Object(f.a)(t,"error",""),t))},n.login=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.password;if(!a||!r)return n.setState({error:"Fill all fields!"});n.props.context.login(a,r).then((function(e){e||n.setState({error:"Invalid Credentails"})}))},n.state={username:"",password:""},n}return Object(N.a)(a,[{key:"render",value:function(){return this.props.context.user?r.a.createElement(E.a,{to:"/"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"hero is-primary "},r.a.createElement("div",{className:"hero-body container"},r.a.createElement("h4",{className:"title"},"Login"))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.login},r.a.createElement("div",{className:"columns is-mobile is-centered"},r.a.createElement("div",{className:"column is-one-third"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Email: "),r.a.createElement("input",{className:"input",type:"email",name:"username",onChange:this.handleChange})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Password: "),r.a.createElement("input",{className:"input",type:"password",name:"password",onChange:this.handleChange})),this.state.error&&r.a.createElement("div",{className:"has-text-danger"},this.state.error),r.a.createElement("div",{className:"field is-clearfix"},r.a.createElement("button",{className:"button is-primary is-outlined is-pulled-right"},"Submit"))))))}}]),a}(n.Component)),z=function(e){var t=e.product;return r.a.createElement("div",{className:"column is-one-third"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("p",{className:"title is-5 has-text-centered"},t.name),r.a.createElement("p",{className:"subtitle is-6 has-text-centered"},"$",t.price),r.a.createElement("p",null,t.shortDesc)),r.a.createElement("footer",{className:"card-footer"},r.a.createElement("div",{className:"card-footer-item"},t.stock>0?r.a.createElement("span",{className:"tag is-success"},"In Stock"):r.a.createElement("span",{className:"tag is-danger"},"Out Of Stock")),r.a.createElement("div",{className:"card-footer-item"},r.a.createElement("button",{className:"button is-primary is-small",onClick:function(){return e.addToCart({id:t.name,product:t,amount:1})}},"Add to Cart")))))},D=y((function(e){var t=e.context.products;return r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title has-text-centered"},"Our Products"),r.a.createElement("div",{className:"columns is-multiline"},t&&t.length?t.map((function(t,a){return r.a.createElement(z,{product:t,key:a,addToCart:e.context.addToCart,removeFromCart:e.context.removeFromCart})})):r.a.createElement("div",{className:"column"},r.a.createElement("h2",{className:"subtitle has-text-grey-light has-text-centered"},"No products found!")))))})),F=a(38),I=a.n(F),A=function(){var e=Object(n.useContext)(O),t=e.user,a=e.isAdmin;return r.a.createElement("section",{className:"hero is-primary is-fullheight"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns is-vcentered"},r.a.createElement("div",{className:"column"},r.a.createElement("h1",{className:"title is-size-1"},"Welcome to Ecommerce Store"),r.a.createElement("p",{className:"subtitle"},"Welcome to our online store. We offer a wide range of products to meet your needs and preferences. From trendy fashion items to essential home goods, we have it all. Our mission is to provide you with a seamless shopping experience and deliver high-quality products right to your doorstep. Whether you're looking for the latest fashion trends, home decor inspiration, or tech gadgets, we've got you covered. Start exploring our collection today and find the perfect items to enhance your lifestyle."),r.a.createElement("div",{className:"buttons is-centered is-flex-direction-column-mobile"},t?r.a.createElement(r.a.Fragment,null,a?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.b,{to:"/product-management",className:"button is-primary is-rounded"},"Product Management"),r.a.createElement(p.b,{to:"/logout",className:"button is-danger is-rounded"},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(p.b,{to:"/products",className:"button is-primary is-rounded"},"Products"),r.a.createElement(p.b,{to:"/cart",className:"button is-info is-rounded"},"Cart"))):r.a.createElement(p.b,{to:"/e-commerce-store/login",className:"button is-primary is-rounded"},"Login"))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{src:I.a,alt:"Image 1",className:"homepage-image"})))))))},L=(a(70),function(e){var t=e.message,a=e.onConfirm,n=e.onCancel;return r.a.createElement("div",{className:"modal is-active"},r.a.createElement("div",{className:"modal-background"}),r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"box"},r.a.createElement("p",null,t),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"button is-primary",onClick:a},"Yes"),r.a.createElement("button",{className:"button",onClick:n},"No")))))}),M=function(){var e=Object(n.useContext)(O),t=e.products,a=e.setProducts,c=Object(n.useState)(null),l=Object(d.a)(c,2),s=l[0],i=l[1],E=Object(n.useState)({}),h=Object(d.a)(E,2),b=h[0],g=h[1],N=Object(n.useState)(!1),x=Object(d.a)(N,2),k=x[0],y=x[1],C=Object(n.useState)(!1),w=Object(d.a)(C,2),j=w[0],S=w[1];Object(n.useEffect)((function(){return function(){var e=Object(u.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("https://xw7qzi3dgg.execute-api.ap-south-1.amazonaws.com/dev/api/v1/products");case 3:t=e.sent,a(t.data.products),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error fetching products:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()(),function(){}}),[a]);var P=function(){var e=Object(u.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.delete("https://xw7qzi3dgg.execute-api.ap-south-1.amazonaws.com/dev/api/v1/deleteProduct?id=".concat(t));case 3:window.location.reload(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Error deleting product:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){i(null),g({})},D=function(e){var t=e.target,a=t.name,n=t.value;g((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(f.a)({},a,n))}))},F=function(){var e=Object(u.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.put("https://xw7qzi3dgg.execute-api.ap-south-1.amazonaws.com/dev/api/v1/updateProduct?id=".concat(t),b);case 3:i(null),g({}),window.location.reload(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error updating product:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"title"},"Product Management Portal"),r.a.createElement("table",{className:"table is-bordered is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Stock"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,s===e.id?r.a.createElement("input",{type:"text",name:"name",value:b.name||"",onChange:D}):e.name),r.a.createElement("td",null,s===e.id?r.a.createElement("textarea",{name:"description",value:b.description||"",onChange:D}):e.description),r.a.createElement("td",null,s===e.id?r.a.createElement("input",{type:"number",name:"price",value:b.price||"",onChange:D}):e.price),r.a.createElement("td",null,s===e.id?r.a.createElement("input",{type:"number",name:"stock",value:b.stock||"",onChange:D}):e.stock),r.a.createElement("td",null,s===e.id?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"button is-primary",onClick:function(){return t=e._id,S(!0),void i(t);var t}},"Save"),r.a.createElement("button",{className:"button",onClick:z},"Cancel")):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"button is-info",onClick:function(){return function(e){i(e);var a=t.find((function(t){return t.id===e}));g(a)}(e._id)}},"Edit"),r.a.createElement("button",{className:"button is-danger",onClick:function(){return t=e._id,y(!0),void i(t);var t}},"Delete"))))})))),r.a.createElement(p.b,{to:"/",className:"button is-link"},"Go Back"),k&&r.a.createElement(L,{message:"Are you sure you want to delete this product?",onConfirm:function(){return P(s),void y(!1)},onCancel:function(){y(!1),i(null)}}),j&&r.a.createElement(L,{message:"Are you sure you want to save this product?",onConfirm:function(){return F(s),void S(!1)},onCancel:function(){S(!1),i(null)}}))},q=function(){return r.a.createElement("section",{className:"hero is-primary is-fullheight"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns is-centered"},r.a.createElement("div",{className:"column is-half"},r.a.createElement("h1",{className:"title"},"About"),r.a.createElement("div",{className:"content"},r.a.createElement("p",{className:"subtitle"},"Project Submitted by:"),r.a.createElement("table",{className:"table is-bordered is-striped is-narrow is-hoverable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Student ID"),r.a.createElement("th",null,"Student Name"),r.a.createElement("th",null,"Student Email"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"2047419"),r.a.createElement("td",null,"Mursal Furqan Kumbhar"),r.a.createElement("td",null,"kumbhar.2047419@studenti.uniroma")),r.a.createElement("tr",null,r.a.createElement("td",null,"2053796"),r.a.createElement("td",null,"Srinjan Ghosh"),r.a.createElement("td",null,"ghosh.2053796@studenti.uniroma1.it")),r.a.createElement("tr",null,r.a.createElement("td",null,"2049050"),r.a.createElement("td",null,"Muhammad Waseem Kalhoro"),r.a.createElement("td",null,"kalhoro.2049050@studenti.uniroma1.it")))),r.a.createElement("p",{className:"profName"},"Submitted to: Prof. Emiliano Casalicchio")))))))},T=function(e){var t=e.user,a=e.logout,c=e.cart,l=Object(n.useState)(!1),s=Object(d.a)(l,2),o=s[0],i=s[1];return r.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(p.b,{to:"/",className:"navbar-item"},r.a.createElement("b",{className:"navbar-item is-size-4"},"ecommerce")),r.a.createElement("button",{className:"navbar-burger burger ".concat(o?"is-active":""),"aria-label":"menu","aria-expanded":o,onClick:function(){i(!o)}},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{className:"navbar-menu ".concat(o?"is-active":"")},r.a.createElement("div",{className:"navbar-start"},r.a.createElement(p.b,{to:"/products",className:"navbar-item"},"Products"),r.a.createElement(p.b,{to:"/about",className:"navbar-item"},"About"),t&&t.accessLevel<1&&r.a.createElement(r.a.Fragment,null,r.a.createElement(p.b,{to:"/add-product",className:"navbar-item"},"Add Product"),r.a.createElement(p.b,{to:"/project-management",className:"navbar-item"},"Product Management")),r.a.createElement(p.b,{to:"/orders",className:"navbar-item"},"Orders")),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},t?r.a.createElement("button",{className:"button is-danger",onClick:a},"Logout"):r.a.createElement(p.b,{to:"/e-commerce-store/login",className:"button is-primary"},"Login"),r.a.createElement(p.b,{to:"/cart",className:"navbar-item"},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-shopping-cart"})),r.a.createElement("span",{className:"tag is-primary"},Object.keys(c).length))))))},J=y((function(e){var t=e.context.user,a=Object(n.useState)(!1),c=Object(d.a)(a,2),l=c[0],s=(c[1],Object(n.useState)([])),i=Object(d.a)(s,2),p=i[0],E=i[1];Object(n.useEffect)((function(){(function(){var e=Object(u.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("https://zm06kfxmx0.execute-api.ap-south-1.amazonaws.com/dev/api/v1/getAllOrders?page=1&limit=10");case 3:a=e.sent,t&&0===t.accessLevel?E(a.data.Orders):E(a.data.Orders.filter((function(e){return e.checkoutCart.user===t.email}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error fetching orders:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var h=function(){var e=Object(u.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t._id,n=Object(o.a)(Object(o.a)({},t),{},{checkoutCart:Object(o.a)(Object(o.a)({},t.checkoutCart),{},{status:"Completed"})}),e.prev=2,e.next=5,v.a.put("https://zm06kfxmx0.execute-api.ap-south-1.amazonaws.com/dev/api/v1/updateOrder?id=".concat(a),n);case 5:200===(r=e.sent).status?(c=p.map((function(e){return e._id===a?Object(o.a)(Object(o.a)({},e),{},{checkoutCart:n.checkoutCart}):e})),E(c)):console.log("Error updating order:",r.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("Error updating order:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(u.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.delete("https://zm06kfxmx0.execute-api.ap-south-1.amazonaws.com/dev/api/v1/deleteOrder?id=".concat(t));case 3:window.location.reload(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Error deleting product:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},t?r.a.createElement(r.a.Fragment,null,l?r.a.createElement("h2",{className:"title"},"Admin Orders Page"):r.a.createElement("h2",{className:"title"},"My Orders"),p&&p.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"table is-bordered is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Serial Number"),r.a.createElement("th",null,"Order ID"),r.a.createElement("th",null,"User"),r.a.createElement("th",null,"Products"),r.a.createElement("th",null,"Total Price"),r.a.createElement("th",null,"Order Date"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,p.map((function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.checkoutCart.user),r.a.createElement("td",null,e.checkoutCart.items.map((function(e){return r.a.createElement("p",{key:e.id},e.product.name)}))),r.a.createElement("td",null,"$",e.checkoutCart.items.reduce((function(e,t){return e+t.product.price*t.amount}),0)),r.a.createElement("td",null,(a=e.checkoutCart.timestamp,new Date(a).toLocaleString())),r.a.createElement("td",null,e.checkoutCart.status),r.a.createElement("td",null,"Ordered"===e.checkoutCart.status&&r.a.createElement("button",{className:"button is-success",onClick:function(){return h(e)}},"Mark Completed"),r.a.createElement("button",{className:"button is-danger",onClick:function(){return b(e._id)}},"Delete")));var a}))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title has-text-grey-light"},"No orders found!"))):r.a.createElement("div",{className:"title has-text-grey-light"},"Login to view orders!"))})),_=function(){var e=r.a.useState(null),t=Object(d.a)(e,2),a=t[0],n=t[1],c=r.a.useState({}),l=Object(d.a)(c,2),i=l[0],h=l[1],f=r.a.useState([]),g=Object(d.a)(f,2),N=g[0],x=g[1],k=r.a.useState(!1),y=Object(d.a)(k,2),C=y[0],j=y[1],z=window.location.href;console.log("--------------",z);var F=r.a.useRef();r.a.useEffect((function(){(function(){var e=Object(u.a)(m.a.mark((function e(){var t,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("user"),a=localStorage.getItem("cart"),e.next=4,v.a.get("https://xw7qzi3dgg.execute-api.ap-south-1.amazonaws.com/dev/api/v1/getAllProducts?page=1&limit=10");case 4:r=e.sent,t=t?JSON.parse(t):null,a=a?JSON.parse(a):{},n(t),x(r.data.products),h(a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var I=function(){localStorage.removeItem("cart"),h({})},L=function(){var e=Object(u.a)(m.a.mark((function e(){var t,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return F.current.history.push("/login"),e.abrupt("return");case 3:return t={},n=Object(o.a)({},i),t.items=Object.values(n),t.timestamp=Date.now(),t.user=a.email,t.status="Ordered",e.next=11,v.a.post("https://zm06kfxmx0.execute-api.ap-south-1.amazonaws.com/dev/api/v1/addOrder",{checkoutCart:t});case 11:r=N.map((function(e){return n[e.name]&&(e.stock=e.stock-n[e.name].amount),e})),x(r),I();case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(O.Provider,{value:{user:a,cart:i,products:N,removeFromCart:function(e){var t=Object(o.a)({},i);delete t[e],localStorage.setItem("cart",JSON.stringify(t)),h(t)},addToCart:function(e){var t=Object(o.a)({},i);t[e.id]?t[e.id].amount+=e.amount:t[e.id]=e,t[e.id].amount>e.product.stock&&(t[e.id].amount=e.product.stock),localStorage.setItem("cart",JSON.stringify(t)),h(t),j(!0),setTimeout((function(){j(!1)}),2e3)},login:function(e,t){return new Promise((function(a,r){var c=b.users.find((function(a){return a.email===e&&a.password===t}));if(c){var l=c.email,s={email:l,token:"",accessLevel:"admin@example.com"===l?0:1};n(s),localStorage.setItem("user",JSON.stringify(s)),a(!0)}else a(!1)}))},addProduct:function(e,t){var a=Object(s.a)(N);a.push(e),x(a),t&&t()},clearCart:I,checkout:L}},r.a.createElement(p.a,{ref:F},r.a.createElement(T,{user:a,logout:function(e){e.preventDefault(),n(null),localStorage.removeItem("user")},cart:i}),r.a.createElement("div",{className:"App"},r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/e-commerce-store",component:A}),r.a.createElement(E.b,{exact:!0,path:"/e-commerce-store/login",component:P}),r.a.createElement(E.b,{exact:!0,path:"/e-commerce-store/cart",component:S}),r.a.createElement(E.b,{exact:!0,path:"/e-commerce-store/add-product",component:w}),r.a.createElement(E.b,{exact:!0,path:"/e-commerce-store/products",component:D}),r.a.createElement(E.b,{exact:!0,path:"/e-commerce-store/project-management",component:M}),r.a.createElement(E.b,{exact:!0,path:"/e-commerce-store/orders",component:J}),r.a.createElement(E.b,{exact:!0,path:"/e-commerce-store/about",component:q})))),C&&r.a.createElement("div",{className:"popup"},"Item added to cart!"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(71);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.99553311.chunk.js.map